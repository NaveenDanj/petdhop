{% extends 'admin/dash_base.html'  %}

{% load static %}

{% block content %}

<div class="content">
    <!-- Top Statistics -->
    <div class="row">
        <div class="col-xl-3 col-sm-6">
            <div class="card card-mini mb-4">
                <div class="card-body">
                    <h2 class="mb-1">{{total_users}}</h2>
                    <p>Online Signups</p>
                    <div class="chartjs-wrapper">
                        <canvas id="barChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-sm-6">
            <div class="card card-mini  mb-4">
                <div class="card-body">
                    <h2 class="mb-1">{{orders_pending}}</h2>
                    <p>Total Orders Pending</p>
                    <div class="chartjs-wrapper">
                        <canvas id="dual-line"></canvas>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-sm-6">
            <div class="card card-mini mb-4">
                <div class="card-body">
                    <h2 class="mb-1">{{total_orders}}</h2>
                    <p>Total Completed Orders</p>
                    <div class="chartjs-wrapper">
                        <canvas id="area-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-sm-6">
            <div class="card card-mini mb-4">
                <div class="card-body">
                    <h2 class="mb-1">{{total_revenue}} LKR</h2>
                    <p>Total Revenue</p>
                    <div class="chartjs-wrapper">
                        <canvas id="line"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="row">

        <div class="col-xl-6 col-lg-6 col-12">
            <!-- Top Sell Table -->
            <div class="card card-table-border-none" data-scroll-height="550">
                <div class="card-header justify-content-between">
                    <h2>Sold by Units</h2>
                    <div>
                        <button class="text-black-50 mr-2 font-size-20"><i
                                class="mdi mdi-cached"></i></button>
                        <div class="dropdown show d-inline-block widget-dropdown">
                            <a class="dropdown-toggle icon-burger-mini" href="#" role="button"
                                id="dropdown-units" data-toggle="dropdown" aria-haspopup="true"
                                aria-expanded="false" data-display="static"></a>
                            <ul class="dropdown-menu dropdown-menu-right"
                                aria-labelledby="dropdown-units">
                                <li class="dropdown-item"><a href="#">Action</a></li>
                                <li class="dropdown-item"><a href="#">Another action</a></li>
                                <li class="dropdown-item"><a href="#">Something else here</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="card-body slim-scroll py-0">
                    <table class="table ">
                        <tbody>

                            {% for item in so %}
                                <tr>
                                    <td class="text-dark">{{item.name}}</td>
                                    <td class="text-center">{{item.total_sales}}</td>
                                    <td class="text-right"><a href="/product_details/?pid={{item.pid}}" target="_blank" >View</a></td>
                                </tr>
                            {% endfor %}

                            

                            <!-- <tr>
                                <td class="text-dark">T-Shirt</td>
                                <td class="text-center">6</td>
                                <td class="text-right">150% <i
                                        class="mdi mdi-arrow-up-bold text-success pl-1 font-size-12"></i>
                                </td>
                            </tr>

                            <tr>
                                <td class="text-dark">Coat</td>
                                <td class="text-center">3</td>
                                <td class="text-right">50% <i
                                        class="mdi mdi-arrow-up-bold text-success pl-1 font-size-12"></i>
                                </td>
                            </tr>

                            <tr>
                                <td class="text-dark">Necklace</td>
                                <td class="text-center">7</td>
                                <td class="text-right">150% <i
                                        class="mdi mdi-arrow-up-bold text-success pl-1 font-size-12"></i>
                                </td>
                            </tr>

                            <tr>
                                <td class="text-dark">Jeans Pant</td>
                                <td class="text-center">10</td>
                                <td class="text-right">300% <i
                                        class="mdi mdi-arrow-down-bold text-danger pl-1 font-size-12"></i>
                                </td>
                            </tr>

                            <tr>
                                <td class="text-dark">Shoes</td>
                                <td class="text-center">5</td>
                                <td class="text-right">100% <i
                                        class="mdi mdi-arrow-up-bold text-success pl-1 font-size-12"></i>
                                </td>
                            </tr>

                            <tr>
                                <td class="text-dark">T-Shirt</td>
                                <td class="text-center">6</td>
                                <td class="text-right">150% <i
                                        class="mdi mdi-arrow-up-bold text-success pl-1 font-size-12"></i>
                                </td>
                            </tr> -->


                        </tbody>
                    </table>

                </div>
                <div class="card-footer bg-white py-4">
                    <a href="#" class="btn-link py-3 text-uppercase">View Report</a>
                </div>
            </div>
        </div>
        <div class="col-xl-6 col-12">
            <!-- Notification Table -->
            <div class="card card-default" data-scroll-height="550">
                <div class="card-header justify-content-between ">
                    <h2>Latest Notifications</h2>
                    <div>
                        <button class="text-black-50 mr-2 font-size-20"><i
                                class="mdi mdi-cached"></i></button>
                        <div class="dropdown show d-inline-block widget-dropdown">
                            <a class="dropdown-toggle icon-burger-mini" href="#" role="button"
                                id="dropdown-notification" data-toggle="dropdown" aria-haspopup="true"
                                aria-expanded="false" data-display="static"></a>
                            <ul class="dropdown-menu dropdown-menu-right"
                                aria-labelledby="dropdown-notification">
                                <li class="dropdown-item"><a href="#">Action</a></li>
                                <li class="dropdown-item"><a href="#">Another action</a></li>
                                <li class="dropdown-item"><a href="#">Something else here</a></li>
                            </ul>
                        </div>
                    </div>

                </div>
                <div class="card-body slim-scroll">

                    {% if notify_len == 0 %}
                        <h3>Empty</h3>
                    {% else %}

                        {% for item in notifies %}
                            <div class="media pb-3 align-items-center justify-content-between">
                                <div
                                    class="d-flex rounded-circle align-items-center justify-content-center mr-3 media-icon iconbox-45 bg-primary text-white">
                                    
                                    {% if item.notify_type == 'User Signup' %}
                                        <i class="mdi mdi-account-arrow-right mdi-24px"></i>

                                    {% elif item.notify_type == 'New Order' %}
                                        <i class="mdi mdi mdi-cart mdi-24px"></i>
                                    {% endif %}

                                </div>
                                <div class="media-body pr-3 ">
                                    <a class="mt-0 mb-1 font-size-15 text-dark" href="#">{{item.notify_type}}</a>
                                    <p>{{item.notify_text}}</p>
                                </div>
                                <span class=" font-size-12 d-inline-block"><i class="mdi mdi-clock-outline"></i>
                                    {{item.date_added}}</span>
                            </div><br>
                        {% endfor %}

                    {% endif %}

                </div>
                <div class="mt-3"></div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            <!-- Recent Order Table -->
            <div class="card card-table-border-none" id="recent-orders">
                <div class="card-header justify-content-between">
                    <h2>Recent Orders</h2>
                    <!-- <div class="date-range-report ">
                        <span></span>
                    </div> -->
                </div>
                <div class="card-body pt-0 pb-5">
                    <table class="table card-table table-responsive table-responsive-large"
                        style="width:100%">
                        <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Customer Name</th>
                                <th class="d-none d-md-table-cell">Order Date</th>
                                <th class="d-none d-md-table-cell">Order Cost</th>
                                <th>Status</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>

                            {% for item in ro %}
                                <tr>
                                    <td><a  href="/view_order/?order_id={{item.order_id}}" target="_blank">{{item.order_id}}</a></td>
                                    <td>
                                        {{item.user_id.username}}
                                    </td>
                                    <td class="d-none d-md-table-cell">{{item.order_date}}</td>
                                    <td class="d-none d-md-table-cell">{{item.total}} LKR</td>
                                    <td>
                                        {% if item.status == 'Canceled' %}
                                            <span class="badge badge-danger">CANCELED</span>
                                        {% elif item.status == 'Pending' %}
                                            <span class="badge badge-warning">PENDING</span>
                                        {% elif item.status == 'Completed' %}
                                            <span class="badge badge-success">COMPLETED</span>
                                        {% endif %}
                                    </td>
                                    <td class="text-right">
                                        <div class="dropdown show d-inline-block widget-dropdown">
                                            <!-- <a class="dropdown-toggle icon-burger-mini" href=""
                                                role="button" id="dropdown-recent-order1"
                                                data-toggle="dropdown" aria-haspopup="true"
                                                aria-expanded="false" data-display="static"></a> -->
                                            <!-- <ul class="dropdown-menu dropdown-menu-right"
                                                aria-labelledby="dropdown-recent-order1">
                                                <li class="dropdown-item">
                                                    <a href="#">View</a>
                                                </li>
                                                <li class="dropdown-item">
                                                    <a href="#">Remove</a>
                                                </li>
                                            </ul> -->
                                        </div>
                                    </td>
                                </tr>
                            {% endfor %}



                            <!-- <tr>
                                <td>24541</td>
                                <td>
                                    <a class="text-dark" href=""> Toddler Shoes, Gucci Watch</a>
                                </td>
                                <td class="d-none d-md-table-cell">2 Units</td>
                                <td class="d-none d-md-table-cell">Nov 15, 2018</td>
                                <td class="d-none d-md-table-cell">$550</td>
                                <td>
                                    <span class="badge badge-warning">Delayed</span>
                                </td>
                                <td class="text-right">
                                    <div class="dropdown show d-inline-block widget-dropdown">
                                        <a class="dropdown-toggle icon-burger-mini" href="#"
                                            role="button" id="dropdown-recent-order2"
                                            data-toggle="dropdown" aria-haspopup="true"
                                            aria-expanded="false" data-display="static"></a>
                                        <ul class="dropdown-menu dropdown-menu-right"
                                            aria-labelledby="dropdown-recent-order2">
                                            <li class="dropdown-item">
                                                <a href="#">View</a>
                                            </li>
                                            <li class="dropdown-item">
                                                <a href="#">Remove</a>
                                            </li>
                                        </ul>
                                    </div>
                                </td>
                            </tr> -->

                        </tbody>
                    </table>
                    <div class="card-footer bg-white py-4">
                        <a href="#" class="btn-link py-3 text-uppercase">View Report</a>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-xl-12">
            <!-- To Do list -->
            
        </div>

    </div>

    <div class="row">
        <div class="col-xl-5">
            <!-- New Customers -->
            <div class="card card-table-border-none" data-scroll-height="580">
                <div class="card-header justify-content-between ">
                    <h2>New Customers</h2>
                    <div>
                        <button class="text-black-50 mr-2 font-size-20">
                            <i class="mdi mdi-cached"></i>
                        </button>
                        <div class="dropdown show d-inline-block widget-dropdown">
                            <a class="dropdown-toggle icon-burger-mini" href="#" role="button"
                                id="dropdown-customar" data-toggle="dropdown" aria-haspopup="true"
                                aria-expanded="false" data-display="static">
                            </a>
                            <ul class="dropdown-menu dropdown-menu-right"
                                aria-labelledby="dropdown-customar">
                                <li class="dropdown-item"><a href="#">Action</a></li>
                                <li class="dropdown-item"><a href="#">Another action</a></li>
                                <li class="dropdown-item"><a href="#">Something else here</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="card-body pt-0">
                    <table class="table ">
                        <tbody>

                            {% for item in new_customer %}
                                <tr>
                                    <td>
                                        <div class="media">
                                            <div class="media-image mr-3 rounded-circle">
                                                <a href="profile.html"><span style="font-size: 30px;" class="mdi mdi-account"></span></a>
                                            </div>
                                            <div class="media-body align-self-center">
                                                <a href="profile.html">
                                                    <h6 class="mt-0 text-dark font-weight-medium">{{item.user.username}}</h6>
                                                </a>
                                                <small>{{item.user.email}}</small>
                                            </div>
                                        </div>
                                    </td>
                                    <td>{{item.total_orders}} Orders</td>
                                    <td class="text-dark d-none d-md-block">{{item.total_gain}} LKR gain</td>
                                </tr>
                            {% endfor %}

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-xl-7">
            <!-- Top Products -->
            <div class="card card-default" data-scroll-height="580">
                <div class="card-header justify-content-between mb-4">
                    <h2>Top Products</h2>
                    <div>
                        <button class="text-black-50 mr-2 font-size-20"><i
                                class="mdi mdi-cached"></i></button>
                        <div class="dropdown show d-inline-block widget-dropdown">
                            <a class="dropdown-toggle icon-burger-mini" href="#" role="button"
                                id="dropdown-product" data-toggle="dropdown" aria-haspopup="true"
                                aria-expanded="false" data-display="static">
                            </a>
                            <ul class="dropdown-menu dropdown-menu-right"
                                aria-labelledby="dropdown-product">
                                <li class="dropdown-item"><a href="#">Update Data</a></li>
                                <li class="dropdown-item"><a href="#">Detailed Log</a></li>
                                <li class="dropdown-item"><a href="#">Statistics</a></li>
                                <li class="dropdown-item"><a href="#">Clear Data</a></li>
                            </ul>
                        </div>
                    </div>

                </div>


                <div class="card-body py-0">

                    {% for item in tp %}
                        <div class="media d-flex mb-5">
                            <div class="media-image align-self-center mr-3 rounded">
                                <a href="/product_details/?pid={{item.item.pid}}"><img style="width: 50px; height:50px;" src="/media/{{item.image.image_id.image_file}}" alt="customer image"></a>
                            </div>
                            <div class="media-body align-self-center">
                                <a href="/product_details/?pid={{item.item.pid}}">
                                    <h6 class="mb-3 text-dark font-weight-medium"> {{item.item.name}}</h6>
                                </a>
                                <p class="float-md-right"><span class="text-dark mr-2">{{item.item.total_sales}}</span>Sales</p>
                                <p style="font-size: small;" class="d-none d-md-block">{{item.item.short_desc}}</p>
                                <p class="mb-0">
                                    <del>{{item.item.old_price}} LKR</del>
                                    <span class="text-dark ml-3">{{item.item.new_price}} LKR</span>
                                </p>
                            </div>
                        </div>
                    {% endfor %}


                </div>
            </div>
        </div>
    </div>
</div>

{% endblock content %}